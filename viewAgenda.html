<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
    function cadastrar() {
            var cpf = document.getElementById("cpf").value;
            var data = document.getElementById("data").value;
            var descricao = document.getElementById("descricao").value;

            var requisicao = new XMLHttpRequest();
            requisicao.open("GET","controllerAgenda.php?cpf="+cpf+
                            "&data="+data+"&descricao="+descricao+"&acao=inserir"
                           );
            requisicao.send();

            requisicao.onload = function(){
                document.getElementById("resposta").innerHTML= this.responseText;
            }
    }

    function apagar() {
            var cpf = document.getElementById("cpf").value;
            
            var requisicao = new XMLHttpRequest();
            requisicao.open("GET","controllerAgenda.php?cpf="+cpf+
                            "&acao=apagar"
                           );
            requisicao.send();

            requisicao.onload = function(){
                document.getElementById("resposta").innerHTML= this.responseText;
            }
    }
    
    function atualizar() {
            var cpf = document.getElementById("cpf").value;
            var data = document.getElementById("data").value;
            var descricao = document.getElementById("descricao").value;

            var requisicao = new XMLHttpRequest();
            requisicao.open("GET","controllerAgenda.php?cpf="+cpf+
                            "&data="+data+"&descricao="+descricao+"&acao=atualizar"
                           );
            requisicao.send();

            requisicao.onload = function(){
                document.getElementById("resposta").innerHTML= this.responseText;
            }
    }
            function consultar() {
            var requisicao = new XMLHttpRequest();
            requisicao.open("GET","controllerAgenda.php?acao=consultar");
            requisicao.send();
            
            html = "";
            requisicao.onload = function(){
                var resposta = JSON.parse(this.responseText);
                for(var i=0; i<resposta.length; i++){
                    html = html+" " +resposta[i].cpf+" "+resposta[i].data+" "+resposta[i].descricao+"<br>";
                }
                document.getElementById("resposta").innerHTML = html;


            }
        
        }

        function consultarPessoa() {
            var cpf = document.getElementById("cpf").value;
            var requisicao = new XMLHttpRequest();
            requisicao.open("GET", "controllerPessoa.php?cpf=" + cpf + "&acao=consultarPessoa");
            requisicao.send();

            requisicao.onload = function() {
                var resposta = JSON.parse(this.responseText);
                    document.getElementById("resposta").innerHTML = "Bem vindo, " + resposta[0].nome;
                }
        }
    </script>
</head>
<body>
    <input id="cpf" placeholder="CPF">
    <input id="data" placeholder="Data">
    <input id="descricao" placeholder="Descricao">
    <button onclick="consultarPessoa()">Consultar Pessoa</button>
    <button onclick="cadastrar()">Cadastrar</button>
    <button onclick="apagar()">Apagar</button>
    <button onclick="atualizar()">Atualizar</button>
    <button onclick="consultar()">Consultar</button>
    <p id="resposta"></p>
</body>
</html>